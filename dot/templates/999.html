{% extends "layout/dot.html" %}
{% load static %}
{% block model %}999 <b class="ms-2">Test Page</b>{% endblock %}

{% block script_preload_src %}<script src="{% static 'js/vendor/jsPdf.js' %}"></script>{% endblock%}
{% block style_src %}
<!-- <link rel="stylesheet" href="% static 'css/report.css' %"> -->
{% endblock%}
<style>
  {% block style %}{% endblock%}
</style>

{% block content_fluid %}
<a class="d-none" href="{% url 'handler' '999' %}" id="clear"></a>
<ol class="breadcrumb mt-3">
  <li class="breadcrumb-item"><a href="#">Home</a></li>
  <li class="breadcrumb-item"><a href="#">Library</a></li>
  <li class="breadcrumb-item active">Data</li>
</ol>
<form action="{% url 'handler' '999' %}" method="POST" target="_blank">
  {% csrf_token %}
  <div id="container"></div>
</form>
{% endblock%}


{% block add_script_src %}
<script src="{% static 'js/mdview.js' %}"></script>
{% endblock %}


<script>
{% block add_script %}

const pre = `### Ofício N. $(usuario.username)
___ **Cuiabá-MT, $(custom.today_full) **\n\n`;

const pos = '[footer]**Pantanal Transportes LTDA**<br />Av Cel Neto, 1894, Jd Passaredo - Cuiabá, MT<br />CEP 78.245-55 Fone: 65 95654-8899[/footer]'

const report = new jsMdview({
  container: document.getElementById('container'),
  db: {nome:"Rafael", idade:55, cargo:"Analista de Sistemas"},
  value: `# Titulo
foo bar`,
  extra: [
    {id:'submit',innerHTML:'<b>G</b>ravar', type:'submit', classList:'btn btn-sm btn-success ms-1'},
  ],
  prefix: pre,
  posfix: pos,
  autofocus: true
});

{% endblock %}
</script>