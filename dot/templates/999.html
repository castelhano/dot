{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>900 Test Page</title>
  <link rel="shortcut icon" href="{% static 'img/favicon.ico'%}">
  <link rel="stylesheet" href="{% static 'css/dot.css' %}" type="text/css">
  <link rel="stylesheet" href="{% static 'css/vendor/all.min.css' %}" type="text/css">
  <link rel="stylesheet" href="{% static 'css/vendor/fontawesome.min.css' %}" type="text/css">
  <link rel="stylesheet" href="{% static 'css/vendor/bootstrap.min.css' %}" type="text/css">
  
</head>
<body>
  <a id="home" href="{% url 'index' %}"></a>
  <a id="clear" href="{% url 'handler' '999' %}"></a>
  <div class="container-fluid">
    <h1>Handler 999</h1>
    <hr>
    
    <div id="foo_folder">
      <table class="table" id="myTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Email</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>01</td>
            <td>Jon Snow</td>
            <td>jom@doo.com</td>
          </tr>
          <tr>
            <td>02</td>
            <td>Mei Sony</td>
            <td>sony@gmail.com</td>
          </tr>
          <tr>
            <td>05</td>
            <td>Jonas Doo</td>
            <td>doo@yahoo.com</td>
          </tr>
        </tbody>
      </table>
    </div>
    
  </div>
  <div id="dot_alert" class="alert alert-dismissible fade mb-1" role="alert">
    <span id="dot_alert_message"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  
  <script src="{% static 'js/listener.js' %}"></script>
  <script src="{% static 'js/table.js' %}"></script>
  <script src="{% static 'js/dot.js' %}"></script>
  <script src="/static/js/vendor/bootstrap.bundle.min.js"></script>
  
  
  
  <script>
    
    // function getLocalidade() {
    //   console.log('ENTREI');
    //   let pesquisa = table.filterInput.value;
      
    //   var xhttp = new XMLHttpRequest();
    //   xhttp.onreadystatechange = function() {
    //     if(this.readyState == 4 && this.status == 200){
    //       if(this.responseText == ''){}
    //       else{
    //         let obj = JSON.parse(this.responseText);
    //         table.loadData(obj);
    //       }
    //     }
    //   };
    //   xhttp.open("GET", `{% url 'trafego_get_localidades' %}?pesquisa=${pesquisa}`, true);
    //   xhttp.send();
    // }
    
    let table = new jsTable(document.querySelector('table'), {
      enablePaginate: true,
      canFilter: true,
      filterCols: ['Nome']
    });
    
    SHORTCUT_MAP['/FTF'] = ':filterFocus';
    SHORTCUT_MAP['arrowrightFTF'] = ':nextPage';
    SHORTCUT_MAP['arrowleftFTF'] = ':previousPage';
    
    function filterFocus(){table.filterInput.select();}
    function save(){console.log(table.getNewRows({format:'json'}));}
    function nextPage(){table.nextPage();}
    function previousPage(){table.previousPage();}

    let json = [{"ID":"22", "Nome":"Briseida Camomila", "Email": "foo@uii.com"},{"ID":"29", "Nome":"Carol Carolinda", "Email": "linda@nomnmn.com"}];
    table.appendData(json)
    
    
    
    
    
  </script>
</body>
</html>