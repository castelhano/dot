<div class="row g-1">
	<div class="form-floating mb-1 {{breakpoint|default:'col-lg'}}">
		<select class="form-select" id="id_empresa" name="empresa" {{attrs}}></select>
		<label for="id_empresa">Empresa</label>
	</div>
</div>

<script>
  function getEmpresas() {
  	var xhttp = new XMLHttpRequest();
  	xhttp.onreadystatechange = function() {
  		if(this.readyState == 4 && this.status == 200){
  			if(this.responseText == ''){}
  			else{
  				let obj = JSON.parse(this.responseText);
  				empresas = document.getElementById("id_empresa");
					empresa_atual = '{{empresa_atual}}';
					if({{blank_row|default:'false'}}){empresas.innerHTML = '<option value="">{{blank_row_message|default:'Todas'}}</option>' }
  				for(key in obj){empresas.innerHTML += `<option value="${obj[key]}" ${obj[key] == empresa_atual ? 'selected' : ''}>${key}</option>`;}
  			}
  		}
  	};
  	xhttp.open("GET", "{% url 'core_get_empresas' %}", true);
  	xhttp.send();
  }
  getEmpresas();
</script>