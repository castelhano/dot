{% extends "layout/dot.html" %}
{% load static %}
{% block title %}Agenda{% endblock %}
{% block model %}Core{% endblock %}
{% block model_menu %}{% include "_component/menu/core.html" %}{% endblock%}

<style>
{% block style %} {% endblock %}
</style>

{% block content_fluid %}
<a class="d-none" id="clear" href="{% url 'core_agendas' %}"></a>
<div class="card mt-2">
    <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" data-bs-target="#base" href="#"><i class="fas fa-list"></i></a></li>
            <li class="nav-item"><a class="nav-link" id="back" title="ALT + V" href="{% url 'index' %}"><i class="fas fa-undo"></i></a></li>
        </ul>
    </div>
    <div class="card-body tab-content">
        <h5 class="card-title mb-3">Agenda</h5>
        <div class="tab-pane fade show active" id="base" role="tabpanel">
            <div class="row g-2">
                <div class="col col-lg-4 col-xl-3 col-xxl-2">
                    <div id="calendar_widget"></div>
                </div>
                <div class="col-lg mt-3 mt-lg-2" id="day_timeline">
                    <div class="row">
                        <div class="col"><h5 class="text-muted" id="title_selected_day">09 Fevereiro <span class="text-purple">QUA</span> 2023</h5></div>
                        {% if perms.core.add_agenda %}<div class="col-auto pe-4"><a class="btn btn-sm btn-success" href="{% url 'core_agenda_add' %}"><i class="fas fa-plus"></i></a></div>{% endif %}
                    </div>
                    <div class="table-responsive">
                        <table class="table table-sm table-hover fs-7">
                            <thead>
                                <tr>
                                    <th>Periodo</th>
                                    <th>Titulo</th>
                                    <th>Tags</th>
                                </tr>
                            </thead>
                            <tbody id="day_timeline">
                                {% for agenda in agendas %}
                                <tr>
                                    <td>{{agenda.inicio}} a {{agenda.termino}}</td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                    
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-lg-3 mt-3 mt-lg-2" id="event_detail">
                    <small>Criado em: <b>10/02/2023</b> - <span>Rafael</span></small><hr class="m-0">
                    <small>Local: <b>Sala anfeteatro 02</b></small>
                    <div class="mt-1">{% lorem %}</div>
                    <div><span class="badge bg-dark">rafael</span> <span class="badge bg-dark">joao</span> <span class="badge bg-dark">camila</span></div><hr class="mt-2 mb-1">
                    <a href="">emenda.pdf</a>
                </div>
            </div>                
        </div>
    </div>
</div>
{% endblock%}

{% block add_script_src %}
<script src="{% static 'js/calendar.js' %}"></script>
{% endblock %}

<script>
{% block add_script %}
let events = {}
const calendar = new jsCalendar({
    container: document.getElementById('calendar_widget'),
    canChangeView: false,
    canSelectDay: true,
    showSummary: true,
    selectedDays: ['2023-02-12'],
    calendarControlsCurrentClasslist: 'btn btn-sm btn-purple-light fs-8 me-1 py-1 py-lg-0',
    calendarControlsSelectDayClasslist: 'btn btn-sm btn-purple-light fs-9'
});

let title = document.getElementById('title_selected_day');

{% endblock %}
</script>